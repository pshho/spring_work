package orders.adv;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import orders.order.Menu;

@Service
@Aspect
public class RestAdvice {
	@Autowired
	Menu mu;
	
	@Around("execution(public void orders.order.Food.menuAppend (..))")
	public void kindsAppend(ProceedingJoinPoint joinPoint) {
		// System.out.println("진입?" + joinPoint.getSignature().getName());
		try {
			joinPoint.proceed();
			
			mu.addMenu("한식");
			
			System.out.println(mu);
		} catch (Throwable e) {
			e.printStackTrace();
		}
	}
	
	@Around("execution(public int orders.order.Restaurant.orderCalc (..))")
	public int order(ProceedingJoinPoint joinPoint) {
		System.out.println("진입?" + joinPoint.getSignature().getName());
		Object args = null;
		try {
			args = joinPoint.proceed();
		} catch (NumberFormatException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (Throwable e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return (int)args;
	}
}
